let pokemonRepository=function(){let e=[];function t(){return e}function n(t){e.push(t)}function i(e){let t=document.querySelector(".pokemon-list"),n=document.createElement("li");n.classList.add("col-12","col-md-4","mb-2"),t.appendChild(n);let i=document.createElement("button");i.innerHTML=e.name,n.appendChild(i),i.classList.add("btn","btn-success","btn-block","btn-lg","w-100","mb-3"),i.setAttribute("data-target","#exampleModal"),i.setAttribute("data-toggle","modal"),function e(t,n){t.addEventListener("click",function(){(function e(t){l(t).then(function(){(function e(t){let n=document.querySelector(".modal-body"),i=document.querySelector(".modal-header");n.innerHTML="";let l=document.querySelector(".modal-title");var a=t.name.split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ");l.innerHTML=a;let o=document.querySelector(".close"),r=document.createElement("img");r.classList.add("modal-img"),r.src=t.imageUrlFront,r.alt="Front image of "+t.name;let s=document.createElement("img");s.classList.add("modal-img"),s.src=t.imageUrlBack,s.alt="Back image of "+t.name;let c=document.createElement("p"),d=[t.types[0].type.name];for(let p=1;p<t.types.length;p++)d.push(", "+t.types[p].type.name);c.innerHTML="Types: "+d.join("");let m=document.createElement("p");m.innerHTML="Height: "+t.height;let u=document.createElement("p");u.innerHTML="Weight: "+t.weight;let h=document.createElement("p"),f=[t.abilities[0].ability.name];for(let g=1;g<t.abilities.length;g++)f.push(", "+t.abilities[g].ability.name);h.innerHTML="Abilities: "+f.join(""),i.appendChild(l),i.appendChild(o),n.appendChild(r),n.appendChild(s),n.appendChild(c),n.appendChild(m),n.appendChild(u),n.appendChild(h)})(t)})})(n)})}(i,e)}function l(e){return fetch(e.detailsUrl).then(function(e){return e.json()}).then(function(t){e.imageUrlFront=t.sprites.front_default,e.imageUrlBack=t.sprites.back_default,e.types=t.types,e.height=t.height,e.weight=t.weight,e.abilities=t.abilities}).catch(function(e){console.error(e)})}let a=document.querySelector(".modal");function o(){a.classList.remove("is-visible")}function r(){var t=document.getElementById("searchInput").value.toLowerCase(),n=e.filter(function(e){return e.name.toLowerCase().includes(t)});document.querySelector(".pokemon-list").innerHTML="",n.forEach(function(e){i(e)})}return window.addEventListener("keydown",e=>{"Escape"===e.key&&a.classList.contains("is-visible")&&o()}),a.addEventListener("click",e=>{e.target===a&&o()}),document.getElementById("searchButton").addEventListener("click",function(){r()}),{getAll:t,add:n,addListItem:i,loadList:function e(){return fetch("https://pokeapi.co/api/v2/pokemon/?limit=150").then(function(e){return e.json()}).then(function(e){e.results.forEach(function(e){n({name:e.name,detailsUrl:e.url})})}).catch(function(e){console.error(e)})},loadDetails:l,searchPokemon:r}}();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(e){pokemonRepository.addListItem(e)})});
